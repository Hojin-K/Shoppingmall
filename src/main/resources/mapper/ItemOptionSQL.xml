<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shop.myapp.repository.ItemOptionRepository">
    <update id="insertItemOptions" parameterType="list">
        insert into HR.SHOP_ITEM_OPTIONS_TB(option_code, item_code, option_name, option_priceud, OPTION_STOCK)
        SELECT CODE_ITEM_OPTIONS_SQ.nextval AS
        fileSeq , O.* FROM (   <foreach collection="list" item="itemOption" separator="UNION ALL ">
        select
        #{itemOption.itemCode} as item_code,
        #{itemOption.optionName} as option_name,
        #{itemOption.optionPriceUd} as option_price_ud,
        #{itemOption.optionStock} as option_stock
        from sys.dual
    </foreach> ) O
    </update>

    <update id="modifyItemOption">
        <foreach collection="list" item="itemOption">
            update HR.SHOP_ITEM_OPTIONS_TB
            set OPTION_PRICEUD = #{itemOption.optionPriceUd},
            OPTION_STOCK = #{itemOption.optionStock}
            where OPTION_CODE = #{itemOption.optionCode}
        </foreach>
    </update>
    <delete id="deleteItemOption">
        <foreach collection="list" item="optionCode">
            delete HR.SHOP_ITEM_OPTIONS_TB where OPTION_CODE= #{optionCode}
        </foreach>
    </delete>

    <select id="findByOptionCode" resultType="com.shop.myapp.dto.ItemOption">
        select *
        from SHOP_ITEM_OPTIONS_TB
        where OPTION_CODE = #{optionCode}
    </select>
    <select id="findByItemCode" resultType="com.shop.myapp.dto.ItemOption">
        select *
        from HR.SHOP_ITEM_OPTIONS_TB
        where ITEM_CODE = #{itemCode}
    </select>
</mapper>